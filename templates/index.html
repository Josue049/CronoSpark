{% extends 'base.html' %}

{% block content %}
<div class="bg-white rounded-2xl p-4 shadow">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-semibold">Eventos</h2>
        <a href="/add" class="text-sm px-3 py-2 rounded-md border">+ Nuevo</a>
    </div>

    {% if events %}
    <div class="space-y-3">
        {% for e in events %}
        <article
            class="p-4 rounded-lg border flex flex-col md:flex-row md:items-center md:justify-between
    {% if e._is_very_near %}ring-4 ring-yellow-300 bg-yellow-50{% elif e.urgent %}ring-2 ring-red-200 bg-red-50{% else %}bg-white{% endif %}">
            <div>
                <div class="flex items-center gap-3">
                    <h3 class="font-semibold text-lg">{{ e.title }}</h3>

                    {% if e._is_very_near %}
                    <span class="text-xs bg-yellow-600 text-white px-2 py-0.5 rounded-full">MUY CERCA</span>
                    {% elif e.urgent %}
                    <span class="text-xs bg-red-600 text-white px-2 py-0.5 rounded-full">URGENTE</span>
                    {% endif %}

                    {% if e._days_label %}
                    <span class="ml-2 text-xs text-gray-700/80 px-2 py-0.5 rounded-md border">{{ e._days_label }}</span>
                    {% endif %}
                </div>

                <div class="text-sm text-gray-600 mt-1">{{ e.date or 'Sin fecha' }} {{ e.time or '' }}</div>
                <p class="mt-2 text-gray-700">{{ e.description }}</p>

                {% if e.link %}
                <a href="{{ e.link }}" target="_blank"
                    class="mt-3 inline-block text-sm font-semibold px-4 py-2 rounded-md shadow-md hover:scale-105 transition transform bg-gradient-to-r from-indigo-500 to-pink-500 text-white">
                    Abrir recordatorio
                </a>
                {% endif %}
            </div>

            <div class="mt-3 md:mt-0 flex items-center gap-2">
                <form action="/delete/{{ e.id }}" method="post" onsubmit="return confirm('¿Eliminar evento?');">
                    <button type="submit" class="px-3 py-2 rounded-md bg-gray-100 hover:bg-gray-200">Eliminar</button>
                </form>
            </div>
        </article>
        {% endfor %}

    </div>
    {% else %}
    <div class="text-gray-500">No hay eventos — añade el primero y ponle fuego al calendario (metafóricamente).</div>
    {% endif %}
</div>
{% endblock %}